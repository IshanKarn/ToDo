{% extends "base.html" %}

{% block title %}My Tasks{% endblock %}

{% block css %}
<link rel="stylesheet" href="/static/css/tasks.css">
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10 bg-white p-6 rounded shadow">

    <h2 class="text-2xl font-semibold mb-6 text-center">
        To-Do List
    </h2>

    <!-- Create Task -->
    <form action="/tasks/create" method="post" class="flex gap-2 mb-6">
        <input
            name="title"
            placeholder="Task title"
            required
            class="flex-grow border px-3 py-2 rounded focus:outline-none focus:ring focus:ring-blue-300"
        />
        <button
            type="submit"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
        >
            Add
        </button>
    </form>

    <!-- Task List -->
    <ul class="space-y-3">
        {% for task in tasks %}
        <li class="flex justify-between items-center border p-3 rounded">

            <!-- Task Info -->
            <div>
                <p class="font-medium">{{ task.title }}</p>
                <p class="text-sm text-gray-500">
                    Status:
                    <span class="{% if task.status == 'completed' %}text-green-600{% else %}text-yellow-600{% endif %}">
                        {{ task.status }}
                    </span>
                </p>
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-2">

                <!-- Update -->
                <form action="/tasks/update/{{ task.id }}" method="post" class="flex gap-1">
                    <select
                        name="status"
                        class="border px-2 py-1 rounded text-sm"
                    >
                        <option value="pending" {% if task.status == 'pending' %}selected{% endif %}>
                            Pending
                        </option>
                        <option value="completed" {% if task.status == 'completed' %}selected{% endif %}>
                            Completed
                        </option>
                    </select>
                    <button
                        type="submit"
                        class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700"
                    >
                        Update
                    </button>
                </form>

                <!-- Delete -->
                <form action="/tasks/delete/{{ task.id }}" method="post">
                    <button
                        type="submit"
                        class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700"
                    >
                        Delete
                    </button>
                </form>

            </div>
        </li>
        {% else %}
        <li class="text-center text-gray-500">
            No tasks yet. Add one above ðŸ‘†
        </li>
        {% endfor %}
    </ul>

</div>
{% endblock %}
